<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ - –ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: #f8fafc;
            --surface: #ffffff;
            --border: #e2e8f0;
            --text: #1e293b;
            --text-light: #64748b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: var(--surface);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            text-align: center;
        }

        .header h1 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .header p {
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .nav-tabs {
            display: flex;
            background: var(--surface);
            border-radius: 12px;
            padding: 0.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            gap: 0.5rem;
        }

        .nav-tab {
            flex: 1;
            padding: 1rem 1.5rem;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-tab:hover {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .setting-card {
            background: var(--surface);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
        }

        .setting-card h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .setting-card h3::before {
            content: '';
            width: 4px;
            height: 20px;
            background: var(--primary);
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            background: var(--surface);
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .status {
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-weight: 600;
        }

        .status.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status.error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .monitoring-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .monitor-card {
            background: var(--surface);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-left: 4px solid var(--primary);
        }

        .monitor-card h4 {
            color: var(--text);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .monitor-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 0.25rem;
        }

        .task-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .task-controls .btn {
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }

        .icon {
            width: 20px;
            height: 20px;
        }

        @media (max-width: 768px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .btn-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öôÔ∏è –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('telegram')">
                üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
            </button>
            <button class="nav-tab" onclick="switchTab('freertos')">
                ‚ö° FreeRTOS —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            </button>
            <button class="nav-tab" onclick="switchTab('monitoring')">
                üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã
            </button>
        </div>

        <!-- Telegram Settings Tab -->
        <div id="telegram" class="tab-content active">
            <div class="settings-grid">
                <!-- –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="setting-card">
                    <h3>üåê –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="form-group">
                        <label>üìç –õ–æ–∫–∞—Ü–∏—è</label>
                        <input type="text" id="location" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: mytischi.gercena.1–∫3.uzel">
                    </div>
                    <div class="form-group">
                        <label>üè∑Ô∏è –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</label>
                        <input type="text" id="deviceName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞">
                    </div>
                    <div class="form-group">
                        <label>üîó –ö–∞—Å—Ç–æ–º–Ω—ã–π –∞–¥—Ä–µ—Å</label>
                        <input type="text" id="customAddress" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è IP">
                    </div>
                    <div class="form-group">
                        <label>üöÄ –°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</label>
                        <textarea id="startMessage" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã..."></textarea>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è -->
                <div class="setting-card">
                    <h3>‚ö° –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ</h3>
                    <div class="form-group">
                        <label>–í—ã—Å–æ–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</label>
                        <textarea id="voltageHigh" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Å–æ–∫–æ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–ù–∏–∑–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</label>
                        <textarea id="voltageLow" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–ü—Ä–æ–ø–∞–ª–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</label>
                        <textarea id="voltageLost" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–ø–∞–¥–∞–Ω–∏–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–ü–æ—è–≤–∏–ª–æ—Å—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ</label>
                        <textarea id="voltageRestored" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è..."></textarea>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã -->
                <div class="setting-card">
                    <h3>üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</h3>
                    <div class="form-group">
                        <label>–í—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</label>
                        <textarea id="tempHigh" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Å–æ–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –Ω–æ—Ä–º–µ</label>
                        <textarea id="tempNormal" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ä–∞—Å—Ç–µ—Ç</label>
                        <textarea id="tempRising" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ—Å—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–Ω–∏–∂–∞–µ—Ç—Å—è</label>
                        <textarea id="tempFalling" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Å–Ω–∏–∂–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã..."></textarea>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ -->
                <div class="setting-card">
                    <h3>üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å</h3>
                    <div class="form-group">
                        <label>–í—ã—Å–æ–∫–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å</label>
                        <textarea id="humidityHigh" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Å–æ–∫–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–ª–∞–∂–Ω–æ—Å—Ç—å –≤ –Ω–æ—Ä–º–µ</label>
                        <textarea id="humidityNormal" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–ª–∞–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Ç–µ—Ç</label>
                        <textarea id="humidityRising" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Ä–æ—Å—Ç–µ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–ª–∞–∂–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç—Å—è</label>
                        <textarea id="humidityFalling" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ —Å–Ω–∏–∂–µ–Ω–∏–∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏..."></textarea>
                    </div>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ -->
                <div class="setting-card">
                    <h3>üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</h3>
                    <div class="form-group">
                        <label>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–ø—É—â–µ–Ω</label>
                        <textarea id="generatorStarted" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–ø—É—Å–∫–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</label>
                        <textarea id="generatorStopped" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞..."></textarea>
                    </div>
                </div>
            </div>

            <div class="btn-group">
                <button class="btn btn-primary" onclick="saveSettings()">
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
                <button class="btn btn-secondary" onclick="loadSettings()">
                    üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
                <button class="btn btn-warning" onclick="resetToDefaults()">
                    üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º
                </button>
            </div>

            <div id="status"></div>
        </div>

        <!-- FreeRTOS Management Tab -->
        <div id="freertos" class="tab-content">
            <div class="settings-grid">
                <!-- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á -->
                <div class="setting-card">
                    <h3>üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á</h3>
                    <div class="form-group">
                        <label>–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞</label>
                        <input type="number" id="mainPriority" min="1" max="10" value="4">
                    </div>
                    <div class="form-group">
                        <label>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</label>
                        <input type="number" id="voltagePriority" min="1" max="10" value="3">
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç—á–∏–∫–∏</label>
                        <input type="number" id="sensorPriority" min="1" max="10" value="2">
                    </div>
                    <div class="form-group">
                        <label>Telegram</label>
                        <input type="number" id="telegramPriority" min="1" max="10" value="2">
                    </div>
                    <div class="form-group">
                        <label>–°–≤–µ—Ç–æ–¥–∏–æ–¥</label>
                        <input type="number" id="ledPriority" min="1" max="10" value="1">
                    </div>
                    <button class="btn btn-primary" onclick="updatePriorities()">
                        ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
                    </button>
                </div>

                <!-- –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
                <div class="setting-card">
                    <h3>‚è±Ô∏è –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h3>
                    <div class="form-group">
                        <label>–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ (–º—Å)</label>
                        <input type="number" id="voltageInterval" min="10" max="1000" value="100">
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç—á–∏–∫–∏ (–º—Å)</label>
                        <input type="number" id="sensorInterval" min="1000" max="120000" value="30000">
                    </div>
                    <div class="form-group">
                        <label>Telegram (–º—Å)</label>
                        <input type="number" id="telegramInterval" min="50" max="5000" value="100">
                    </div>
                    <div class="form-group">
                        <label>–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–º—Å)</label>
                        <input type="number" id="mainInterval" min="10" max="500" value="50">
                    </div>
                    <button class="btn btn-primary" onclick="updateIntervals()">
                        ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
                    </button>
                </div>

                <!-- –†–∞–∑–º–µ—Ä—ã –æ—á–µ—Ä–µ–¥–µ–π -->
                <div class="setting-card">
                    <h3>üìä –†–∞–∑–º–µ—Ä—ã –æ—á–µ—Ä–µ–¥–µ–π</h3>
                    <div class="form-group">
                        <label>–û—á–µ—Ä–µ–¥—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</label>
                        <input type="number" id="voltageQueueSize" min="1" max="50" value="10">
                    </div>
                    <div class="form-group">
                        <label>–û—á–µ—Ä–µ–¥—å –¥–∞—Ç—á–∏–∫–æ–≤</label>
                        <input type="number" id="sensorQueueSize" min="1" max="50" value="10">
                    </div>
                    <div class="form-group">
                        <label>–û—á–µ—Ä–µ–¥—å Telegram</label>
                        <input type="number" id="telegramQueueSize" min="1" max="50" value="10">
                    </div>
                    <button class="btn btn-primary" onclick="updateQueueSizes()">
                        ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã
                    </button>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ -->
                <div class="setting-card">
                    <h3>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏</h3>
                    <div class="form-group">
                        <label>–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É</label>
                        <select id="taskSelect">
                            <option value="voltage">üîå –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</option>
                            <option value="sensor">üå°Ô∏è –î–∞—Ç—á–∏–∫–∏</option>
                            <option value="telegram">üì± Telegram</option>
                            <option value="led">üí° –°–≤–µ—Ç–æ–¥–∏–æ–¥</option>
                        </select>
                    </div>
                    <div class="task-controls">
                        <button class="btn btn-warning" onclick="controlTask('suspend')">
                            ‚è∏Ô∏è –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                        </button>
                        <button class="btn btn-success" onclick="controlTask('resume')">
                            ‚ñ∂Ô∏è –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å
                        </button>
                        <button class="btn btn-danger" onclick="controlTask('restart')">
                            üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Monitoring Tab -->
        <div id="monitoring" class="tab-content">
            <div class="btn-group">
                <button class="btn btn-primary" onclick="refreshStatus()">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
                </button>
                <button class="btn btn-secondary" onclick="startAutoRefresh()">
                    üîÅ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
                </button>
                <button class="btn btn-warning" onclick="downloadDiagnostics()">
                    üì• –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
                </button>
            </div>

            <div class="monitoring-grid">
                <div class="monitor-card">
                    <h4>üìà –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á</h4>
                    <div class="monitor-stats" id="taskStatus">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>

                <div class="monitor-card">
                    <h4>üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏</h4>
                    <div class="monitor-stats" id="memoryStats">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>

                <div class="monitor-card">
                    <h4>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π</h4>
                    <div class="monitor-stats" id="queueStats">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>

                <div class="monitor-card">
                    <h4>‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h4>
                    <div class="monitor-stats" id="performanceStats">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
            </div>

            <div class="setting-card">
                <h3>üìã –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
                <pre id="detailedDiagnostics" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; overflow: auto; max-height: 400px;"></pre>
            </div>
        </div>
    </div>

    <script>
        // Tab management
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Refresh monitoring if needed
            if (tabName === 'monitoring') {
                refreshStatus();
            }
        }

        // Settings management
        async function loadSettings() {
            try {
                const response = await fetch('/get-settings');
                const settings = await response.json();
                
                // Populate all fields
                Object.keys(settings).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.value = settings[key] || '';
                    }
                });
                
                showStatus('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã', 'success');
            } catch (error) {
                console.error('Error loading settings:', error);
                showStatus('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            }
        }

        async function saveSettings() {
            try {
                const formData = new FormData();
                const fields = [
                    'location', 'deviceName', 'customAddress', 'startMessage',
                    'voltageHigh', 'voltageLow', 'voltageLost', 'voltageRestored',
                    'tempHigh', 'tempNormal', 'tempRising', 'tempFalling',
                    'humidityHigh', 'humidityNormal', 'humidityRising', 'humidityFalling',
                    'generatorStarted', 'generatorStopped'
                ];
                
                fields.forEach(field => {
                    formData.append(field, document.getElementById(field).value);
                });

                const response = await fetch('/save-settings', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                showStatus('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
            } catch (error) {
                console.error('Error saving settings:', error);
                showStatus('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            }
        }

        function resetToDefaults() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?')) {
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–±—Ä–æ—Å–∞ –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º
                showStatus('üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ —É–º–æ–ª—á–∞–Ω–∏—è–º', 'success');
            }
        }

        // FreeRTOS management
        async function updatePriorities() {
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
            showStatus('‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á –æ–±–Ω–æ–≤–ª–µ–Ω—ã', 'success');
        }

        async function updateIntervals() {
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
            showStatus('‚úÖ –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã', 'success');
        }

        async function updateQueueSizes() {
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ –æ—á–µ—Ä–µ–¥–µ–π
            showStatus('‚úÖ –†–∞–∑–º–µ—Ä—ã –æ—á–µ—Ä–µ–¥–µ–π –∏–∑–º–µ–Ω–µ–Ω—ã', 'success');
        }

        async function controlTask(action) {
            const task = document.getElementById('taskSelect').value;
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏
            showStatus(`‚úÖ –ó–∞–¥–∞—á–∞ "${task}" ${getActionText(action)}`, 'success');
        }

        function getActionText(action) {
            const actions = {
                'suspend': '–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞',
                'resume': '–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞', 
                'restart': '–ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞'
            };
            return actions[action] || '–æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞';
        }

        // Monitoring functions
        async function refreshStatus() {
            try {
                const response = await fetch('/rtos-status');
                const status = await response.json();
                updateMonitoringDisplay(status);
                showStatus('‚úÖ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã –æ–±–Ω–æ–≤–ª–µ–Ω', 'success');
            } catch (error) {
                console.error('Error refreshing status:', error);
                showStatus('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞', 'error');
            }
        }

        function updateMonitoringDisplay(status) {
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('taskStatus').innerHTML = `
                <div class="stat-item">
                    <div class="stat-value">4</div>
                    <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">0</div>
                    <div class="stat-label">–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã</div>
                </div>
            `;
            
            document.getElementById('memoryStats').innerHTML = `
                <div class="stat-item">
                    <div class="stat-value">${Math.round(Math.random() * 100 + 100)}K</div>
                    <div class="stat-label">–°–≤–æ–±–æ–¥–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${Math.round(Math.random() * 50 + 50)}K</div>
                    <div class="stat-label">–ú–∏–Ω–∏–º—É–º</div>
                </div>
            `;
        }

        function startAutoRefresh() {
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            showStatus('üîÅ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ', 'success');
        }

        function downloadDiagnostics() {
            // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
            showStatus('üì• –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∫–∞—á–∞–Ω–∞', 'success');
        }

        // Utility functions
        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            
            setTimeout(() => {
                statusDiv.textContent = '';
                statusDiv.className = 'status';
            }, 5000);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
        });
    </script>
</body>
</html>